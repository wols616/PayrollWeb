@model List<PayrollWeb.Models.Empleado>

@{
    ViewData["Title"] = "Empleados - Reporte de Asistencias";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    body {
        background-color: #f2f9ff;
    }


    .table thead {
        background-color: #007bff;
        color: white;
    }

    .table th {
        border: none;
        padding: 12px 15px;
    }

    .table td {
        padding: 12px 15px;
        vertical-align: middle;
    }

    .table tbody tr:nth-child(even) {
        background-color: #f8fafc;
    }

    .table tbody tr:hover {
        background-color: #e9f5ff;
    }

    .btn-outline-info {
        color: #007bff;
        border-color: #007bff;
    }

        .btn-outline-info:hover {
            background-color: #007bff;
            color: white;
        }
</style>

<div style="background-color: #f2f9ff; min-height: 100vh; padding: 20px;">
    <div class="container" style="background-color: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <div style="border-bottom: 1px solid #e9ecef; padding-bottom: 15px; margin-bottom: 20px;">
            <h2 style="color: #007bff;">@ViewData["Title"]</h2>
        </div>

        <div class="mb-3 d-flex text-primary">
            <input type="text" id="buscarEmpleado" class="form-control" placeholder="Buscar por nombre o apellido" style="max-width: 300px;">
        </div>

        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th style="width: 15%">DUI</th>
                        <th style="width: 15%">Nombre</th>
                        <th style="width: 15%">Apellidos</th>
                        <th style="width: 15%">Teléfono</th>
                        <th style="width: 20%">Correo</th>
                        <th style="width: 10%">Estado</th>
                        <th style="width: 10%">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var emp in Model)
                    {
                        <tr>
                            <td>@emp.Dui</td>
                            <td>@emp.Nombre</td>
                            <td>@emp.Apellidos</td>
                            <td>@emp.Telefono</td>
                            <td>@emp.Correo</td>
                            <td>
                                <span class="badge @(emp.Estado == "Activo" ? "bg-success" : "bg-secondary")">
                                    @emp.Estado
                                </span>
                            </td>
                            <td>
                                <a asp-controller="ReporteAsistencias"
                                   asp-action="ReportesAsistenciasEmpleado"
                                   asp-route-IdEmpleado="@emp.IdEmpleado"
                                   class="btn btn-outline-info btn-sm"
                                   title="Ver reporte de asistencias">
                                    <i class="bi bi-calendar2-check"></i> Ver
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">

<script>
      document.getElementById("buscarEmpleado").addEventListener("input", function () {
        var filtro = this.value.toLowerCase();
        var filas = document.querySelectorAll("table tbody tr");

        filas.forEach(function (fila) {
            var nombre = fila.cells[1]?.textContent.toLowerCase();
            var apellido = fila.cells[2]?.textContent.toLowerCase();

            if (nombre.includes(filtro) || apellido.includes(filtro)) {
                fila.style.display = "";
            } else {
                fila.style.display = "none";
            }
        });
    });
</script>